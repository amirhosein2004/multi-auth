# ๐ Endpoint: `POST /api/v1/accounts/auth/resend-otp-or-link/`

### ๐ฏ ฺฉุงุฑุจุฑุฏ:

ุงู API ุจุฑุง ุงุฑุณุงู ูุฌุฏุฏ ฺฉุฏ ุชุฃุฏ (OTP) ุง ููฺฉ ุซุจุชโูุงู ุจู ฺฉุงุฑุจุฑ ุงุณุชูุงุฏู ูโุดูุฏ. ุณุณุชู ุจู ุทูุฑ ุฎูุฏฺฉุงุฑ ุชุดุฎุต ูโุฏูุฏ ฺฉู ฺฉุงุฑุจุฑ ุฌุฏุฏ ุงุณุช ุง ูุจูุงู ุซุจุชโูุงู ฺฉุฑุฏู ู ูพุงู ููุงุณุจ ุฑุง ุงุฑุณุงู ูโฺฉูุฏ:

*   **ฺฉุงุฑุจุฑุงู ููุฌูุฏ:** ฺฉุฏ ูุฑูุฏ (OTP) ุจู ุงูู ุง ููุจุงู ุงุฑุณุงู ูโุดูุฏ.
*   **ฺฉุงุฑุจุฑุงู ุฌุฏุฏ:**
    *   ุงฺฏุฑ ุดูุงุณู **ุงูู** ุจุงุดุฏุ ููฺฉ ุซุจุชโูุงู ุงุฑุณุงู ูโุดูุฏ.
    *   ุงฺฏุฑ ุดูุงุณู **ููุจุงู** ุจุงุดุฏุ ฺฉุฏ ุซุจุชโูุงู (OTP) ุงุฑุณุงู ูโุดูุฏ.

> ุงู endpoint ุจุฑุง ุจุงุฒุงุจ ุฏุณุชุฑุณ ุง ุงุฏุงูู ูุฑุขูุฏ ุซุจุชโูุงู ฺฉุงุฑุจุฑุฏ ุฏุงุฑุฏ.

---

## ๐ ุดุฑุงุท ุงุณุชูุงุฏู

* โ ููุท ฺฉุงุฑุจุฑุงู **(unauthenticated)** ูุฌุงุฒ ุจู ุงุณุชูุงุฏู ูุณุชูุฏ.
* โ ุงุฑุณุงู **ุชูฺฉู ฺฉูพฺุง Turnstile** ุงูุฒุงู ุงุณุช.
* โฑ ูพุณ ุงุฒ ูุฑ ุจุงุฑ ุฏุฑุฎูุงุณุช ุจุฑุง ฺฉ ุดูุงุณูุ ุชุง **ฒ ุฏููู** ุงูฺฉุงู ุงุฑุณุงู ูุฌุฏุฏ ูุฌูุฏ ูุฏุงุฑุฏ.
* ๐ฆ ุงู endpoint ุชุญุช **ูุญุฏูุฏุช ูุฑุฎ (Rate Limiting)** ุงุณุช.

---

## ๐ ุณุทุญ ุฏุณุชุฑุณ

| ุดุฑุท                          | ูุถุนุช                        |
| ---------------------------- | ---------------------------- |
| ูุงุฒ ุจู ูุงฺฏูุ               | โ ุฎุฑ (ูุฎุตูุต ูููุงูโูุง)       |
| ฺฉูพฺุง ุงุฌุจุงุฑุ                 | โ ุจูู (Cloudflare Turnstile) |
| ูุญุฏูุฏุช ูุฑุฎ (Throttle) ูุนุงูุ | โ ุจูู                        |

---

## ๐จ ุฏุฑุฎูุงุณุช

### โค Method: `POST`

### โค URL: `/api/v1/accounts/auth/resend-otp-or-link/`

---

### Headers

| ฺฉูุฏ         | ููุฏุงุฑ              |
| ------------ | ------------------ |
| Content-Type | `application/json` |

---

### Body (JSON)

| ููุฏ                    | ููุน    | ุงูุฒุงูุ | ุชูุถุญ                                     |
| ----------------------- | ------ | ------- | ----------------------------------------- |
| `identity`              | string | โ       | ุงูู ุง ุดูุงุฑู ููุจุงู ฺฉุงุฑุจุฑ               |
| `cf_turnstile_response` | string | โ       | ุชูฺฉู ูุนุชุจุฑ ฺฉูพฺุง Turnstile                |

---

## ๐งช ููููู ุฏุฑุฎูุงุณุช

```json
{
  "identity": "user@example.com",
  "cf_turnstile_response": "CAPTCHA_TOKEN"
}
```

---

## โ ูพุงุณุฎ ูููู

### โ๏ธ Status Code: `200 OK`

ุจุณุชู ุจู ูุถุนุช ฺฉุงุฑุจุฑ (ุฌุฏุฏ/ููุฌูุฏ) ู ููุน ุดูุงุณู (ุงูู/ููุจุงู)ุ ฺฉ ุงุฒ ูพุงุณุฎโูุง ุฒุฑ ุจุงุฒฺฏุฑุฏุงูุฏู ูโุดูุฏ:

#### ุงุฑุณุงู ูุฌุฏุฏ ฺฉุฏ ูุฑูุฏ (ฺฉุงุฑุจุฑ ููุฌูุฏ)

```json
{
  "detail": "ฺฉุฏ ูุฑูุฏ ุจู ุงูู/ุดูุงุฑู ุดูุง ุงุฑุณุงู ุดุฏ",
  "purpose": "login",
  "next_url": "/api/v1/accounts/auth/verify-otp/"
}
```

#### ุงุฑุณุงู ูุฌุฏุฏ ููฺฉ ุซุจุชโูุงู (ฺฉุงุฑุจุฑ ุฌุฏุฏ ุจุง ุงูู)

```json
{
  "detail": "ููฺฉ ุซุจุชโูุงู ุจู ุงูู ุดูุง ุงุฑุณุงู ุดุฏ",
  "purpose": "register",
  "next_url": "/api/v1/accounts/auth/verify-link/"
}
```

#### ุงุฑุณุงู ูุฌุฏุฏ ฺฉุฏ ุซุจุชโูุงู (ฺฉุงุฑุจุฑ ุฌุฏุฏ ุจุง ููุจุงู)

```json
{
  "detail": "ฺฉุฏ ุซุจุชโูุงู ุจุฑุง ุดูุงุฑู ุดูุง ุงุฑุณุงู ุดุฏ",
  "purpose": "register",
  "next_url": "/api/v1/accounts/auth/verify-otp/"
}
```

| ููุฏ       | ุชูุถุญ                                                        |
| ---------- | ------------------------------------------------------------ |
| `detail`   | ูพุงู ููููุชโุขูุฒ                                             |
| `purpose`  | ูุฏู ุงุฒ ุงุฑุณุงู (`login` ุง `register`)                          |
| `next_url` | ุขุฏุฑุณ API ฺฉู ฺฉุงุฑุจุฑ ุจุงุฏ ุฏุฑ ูุฑุญูู ุจุนุฏ ุจู ุขู ูุฑุงุฌุนู ฺฉูุฏ         |

---

## โ ูพุงุณุฎโูุง ุฎุทุง

| ฺฉุฏ ูุถุนุช | ุชูุถุญ                               | ููููู ูพุงุณุฎ                                                                                                      |
| -------- | ----------------------------------- | --------------------------------------------------------------------------------------------------------------- |
| `400`    | ูุฑูุฏ ูุงูุนุชุจุฑ                        | ๐ ูููููโูุง ุฏุฑ ุงุฏุงูู                                                                                            |
| `403`    | ฺฉุงุฑุจุฑ ูุงุฑุฏ ุดุฏู ู ุงุฌุงุฒู ุงุณุชูุงุฏู ูุฏุงุฑุฏ    | `{ "detail": "ุดูุง ูุจูุงู ูุงุฑุฏ ุดุฏูโุงุฏ." }`                                                                       |
| `429`    | ุนุจูุฑ ุงุฒ ุญุฏ ูุฌุงุฒ ุชุนุฏุงุฏ ุฏุฑุฎูุงุณุช       | `{ "detail": "ุชุนุฏุงุฏ ุฏุฑุฎูุงุณุชโูุง ุจุด ุงุฒ ุญุฏ ูุฌุงุฒ ุงุณุช. ูุทูุงู ูพุณ ุงุฒ ฒ ุฏููู ุฏูุจุงุฑู ุชูุงุด ฺฉูุฏ.", "available_in_seconds": 120 }` |
| `500`    | ุฎุทุง ุฏุงุฎู ุณุฑูุฑ                      | `{ "detail": "ุฎุทุง ูุงุดูุงุฎุชูโุง ุฑุฎ ุฏุงุฏู ุงุณุช. ูุทูุงู ุฏูุจุงุฑู ุชูุงุด ฺฉูุฏ." }`                                         |

---

### ๐ ููููู ูพุงุณุฎ 400

#### โ ุฎุทุงูุง ุงุนุชุจุงุฑุณูุฌ ููุฏูุง:

```json
{
  "identity": ["ูุงุฑุฏ ฺฉุฑุฏู ุงูู ุง ุดูุงุฑู ุชููู ุงูุฒุงู ุงุณุช."],
  "cf_turnstile_response": ["ุงุนุชุจุงุฑุณูุฌ ฺฉูพฺุง ูุงูููู ุจูุฏ."]
}
```

#### โ ุงูู ูุงูุนุชุจุฑ:

```json
{
  "identity": ["ุงูู ูุงูุนุชุจุฑ ุงุณุช. ูุทูุงู ฺฉ ุงูู ูุนุชุจุฑ ูุงููุฏ example@example.com ูุงุฑุฏ ฺฉูุฏ."]
}
```

#### โ ุดูุงุฑู ููุจุงู ูุงูุนุชุจุฑ:

```json
{
  "identity": ["ูุฑูุฏ ูุงูุนุชุจุฑ ุงุณุช. ูุทูุงู ฺฉ ุงูู ุง ุดูุงุฑู ุชููู ูุนุชุจุฑ ูุงุฑุฏ ฺฉูุฏ."]
}
