# 📌 Endpoint: `POST /api/v1/accounts/password/change-password/`

### 🎯 کاربرد:

این API به کاربران احراز هویت شده اجازه می‌دهد تا رمز عبور فعلی خود را تغییر دهند.

> این عملیات برای کاربرانی است که رمز عبور فعلی خود را می‌دانند.

---

## 📋 شرایط استفاده

* ✅ کاربر باید **لاگین کرده باشد (authenticated)**.
* ✅ کاربر باید از قبل رمز عبور داشته باشد.
* ✅ وارد کردن **رمز عبور فعلی** برای تأیید هویت الزامی است.
* 🚦 این endpoint تحت **محدودیت نرخ (Rate Limiting)** است.

---

## 🔐 سطح دسترسی

| شرط                          | وضعیت                        |
| ---------------------------- | ---------------------------- |
| نیاز به لاگین؟               | ✅ بله (کاربران احراز هویت شده) |
| کپچا اجباری؟                 | ❌ خیر                        |
| محدودیت نرخ (Throttle) فعال؟ | ✅ بله                        |

---

## 📨 درخواست

### ➤ Method: `POST`

### ➤ URL: `/api/v1/accounts/password/change-password/`

---

### Headers

| کلید          | مقدار              |
| ------------- | ------------------ |
| Content-Type  | `application/json` |
| Authorization | `Bearer YOUR_ACCESS_TOKEN` |

---

### Body (JSON)

```json
{
  "old_password": "YourCurrentP@ssword",
  "new_password1": "YourNewP@ssword123",
  "new_password2": "YourNewP@ssword123"
}
```

| فیلد          | نوع    | الزامی؟ | توضیح                                                                 |
| ------------- | ------ | ------- | --------------------------------------------------------------------- |
| `old_password`  | string | ✅       | رمز عبور فعلی کاربر.                                                  |
| `new_password1` | string | ✅       | رمز عبور جدید. باید شرایط امنیتی رمز را برآورده کند.                  |
| `new_password2` | string | ✅       | تکرار رمز عبور جدید. باید با `new_password1` یکسان باشد.               |

---

## ✅ پاسخ موفق

### ✔️ Status Code: `200 OK`

```json
{
  "detail": "رمز عبور شما با موفقیت تغییر کرد."
}
```

---

## ❌ پاسخ‌های خطا

| کد وضعیت | توضیح                               | نمونه پاسخ                                                                                                      |
| -------- | ------------------------------------ | --------------------------------------------------------------------------------------------------------------- |
| `400`    | ورودی نامعتبر یا رمز عبور اشتباه     | 👇 نمونه‌ها در ادامه                                                                                            |
| `401`    | کاربر احراز هویت نشده است           | `{ "detail": "اعتبارنامه ارائه نشد." }`                                                                       |
| `429`    | عبور از حد مجاز تعداد درخواست        | `{ "detail": "شما بیش از حد مجاز درخواست ارسال کرده‌اید." }`                                                     |
| `500`    | خطای داخلی سرور                     | `{ "detail": "خطای ناشناخته‌ای رخ داده است. لطفاً دوباره تلاش کنید." }`                                         |

---

### 📉 نمونه پاسخ 400

#### ❗ رمز عبور فعلی اشتباه:

```json
{
  "old_password": ["رمز عبور فعلی شما اشتباه است."]
}
```

#### ❗ عدم تطابق رمزهای جدید:

```json
{
  "new_password2": ["دو فیلد رمز عبور با یکدیگر مطابقت ندارند."]
}
```

#### ❗ رمز عبور جدید ضعیف:

```json
{
  "new_password1": [
    "رمز عبور باید حداقل ۸ کاراکتر باشد.",
    "رمز عبور نمی‌تواند کاملاً عددی باشد."
  ]
}
```

---
